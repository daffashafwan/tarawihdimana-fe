<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Hello, world!</title>

    <!-- Custom CSS for centering -->
    <style>
        .container-main {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .input-group {
            /* Adjust width as needed */
            position: relative;
        }

        .search-results {
            position: absolute;
            top: calc(100% + 10px);
            /* Position below the input group */
            left: 0;
            width: 100%;
            background-color: white;
            border: 1px solid #ced4da;
            border-radius: 0 0 0.25rem 0.25rem;
        }

        .search-results .card {
            margin: 5px;
        }

        .search-results .card:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <div class="container-main">
        <div class="card">
            <div class="input-group">
                <!-- Add the input elements for latitude and longitude -->
                <input type="text" id="latitudeInput" class="form-control" placeholder="Latitude">
                <input type="text" id="longitudeInput" class="form-control" placeholder="Longitude">
                <button type="button" class="btn btn-outline-primary" data-mdb-ripple-init
                    onclick="showSingleCard()">Search</button>
                <!-- Add a button to get device location -->
                <button type="button" class="btn btn-outline-secondary" data-mdb-ripple-init
                    onclick="getDeviceLocation()">Get Device Location</button>
                <div class="search-results" id="searchResults" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script>
        function showSingleCard() {
            // Clear previous results
            document.getElementById("searchResults").innerHTML = "";

            // Get latitude and longitude values
            var latitude = document.getElementById("latitudeInput").value.trim();
            var longitude = document.getElementById("longitudeInput").value.trim();

            console.log(latitude, longitude)

            // Validate latitude and longitude as numbers
            if (isNaN(latitude) || isNaN(longitude)) {
                alert("Please enter valid latitude and longitude values.");
                return;
            }

            var maxCoordinates = getMaxLatitudeLongitude(latitude, longitude, 5);
            console.log(latitude, longitude, maxCoordinates)

            $.ajax({
                url: ` https://www.google.com/search?tbm=map&authuser=0&hl=en&gl=id&pb=!4m12!1m3!1d16363.476722918085!2d112.58131070290514!3d-7.901964219307346!2m3!1f0!2f0!3f0!3m2!1i1568!2i795!4f13.1!7i20!10b1!12m17!1m1!18b1!2m3!5m1!6e2!20e3!10b1!12b1!13b1!16b1!17m1!3e1!20m4!5e2!6b1!8b1!14b1!19m4!2m3!1i360!2i120!4i8!20m57!2m2!1i203!2i100!3m2!2i4!5b1!6m6!1m2!1i86!2i86!1m2!1i408!2i240!7m42!1m3!1e1!2b0!3e3!1m3!1e2!2b1!3e2!1m3!1e2!2b0!3e3!1m3!1e8!2b0!3e3!1m3!1e10!2b0!3e3!1m3!1e10!2b1!3e2!1m3!1e9!2b1!3e2!1m3!1e10!2b0!3e3!1m3!1e10!2b1!3e2!1m3!1e10!2b0!3e4!2b1!4b1!9b0!22m6!1sHIfsZf_1B8GbseMPzZKHoAQ%3A4!2s1i%3A0%2Ct%3A11886%2Cp%3AHIfsZf_1B8GbseMPzZKHoAQ%3A4!7e81!12e5!17sHIfsZf_1B8GbseMPzZKHoAQ%3A345!18e15!24m98!1m30!13m9!2b1!3b1!4b1!6i1!8b1!9b1!14b1!20b1!25b1!18m19!3b1!4b1!5b1!6b1!9b1!12b1!13b1!14b1!15b1!17b1!20b1!21b1!22b1!25b1!27m1!1b0!28b0!31b0!32b0!10m1!8e3!11m1!3e1!14m1!3b1!17b1!20m2!1e3!1e6!24b1!25b1!26b1!29b1!30m1!2b1!36b1!39m3!2m2!2i1!3i1!43b1!52b1!54m1!1b1!55b1!56m2!1b1!3b1!65m5!3m4!1m3!1m2!1i224!2i298!71b1!72m19!1m5!1b1!2b1!3b1!5b1!7b1!4b1!8m10!1m6!4m1!1e1!4m1!1e3!4m1!1e4!3sother_user_reviews!6m1!1e1!9b1!89b1!103b1!113b1!114m3!1b1!2m1!1b1!117b1!122m1!1b1!125b0!26m4!2m3!1i80!2i92!4i8!30m28!1m6!1m2!1i0!2i0!2m2!1i530!2i795!1m6!1m2!1i1518!2i0!2m2!1i1568!2i795!1m6!1m2!1i0!2i0!2m2!1i1568!2i20!1m6!1m2!1i0!2i775!2m2!1i1568!2i795!34m18!2b1!3b1!4b1!6b1!8m6!1b1!3b1!4b1!5b1!6b1!7b1!9b1!12b1!14b1!20b1!23b1!25b1!26b1!37m1!1e81!42b1!47m0!49m7!3b1!6m2!1b1!2b1!7m2!1e3!2b1!50m4!2e2!3m2!1b1!3b1!61b1!67m2!7b1!10b1!69i683&q=masjid&oq=masjid&gs_l=maps.3..38i426k1l5.27954156.27954844.1.27979240.6.6.....94.417.5.5.....0....1..maps..1.5.430.0..38i444k1j38i376k1j38i377k1.&tch=1&ech=1&psi=HIfsZf_1B8GbseMPzZKHoAQ.1709999900684.1`,
                method: "GET",
                dataType: "json",
                success: function (data) {
                    // Handle the response data here
                    console.log(data);
                },
                error: function (error) {
                    // Handle the error here
                    console.error("Error:", error);
                }
            });

            // Display single card
            var resultsContainer = document.getElementById("searchResults");
            var card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                    <div class="card-body">
                        <h5 class="card-title">Latitude: ${latitude}</h5>
                        <p class="card-text">Longitude: ${longitude}</p>
                    </div>
                `;
            resultsContainer.appendChild(card);
            document.getElementById("searchResults").style.display = "block";
        }

        function getDeviceLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;

                    // Update input fields with device location
                    document.getElementById("latitudeInput").value = latitude;
                    document.getElementById("longitudeInput").value = longitude;
                }, function (error) {
                    alert("Error getting device location: " + error.message);
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function getMaxLatitudeLongitude(baseLatitude, baseLongitude, radiusInKm) {
            // Radius of the Earth in kilometers
            const earthRadius = 6371;

            // Convert latitude and longitude from degrees to radians
            const baseLatitudeRad = toRadians(baseLatitude);
            const baseLongitudeRad = toRadians(baseLongitude);

            // Calculate the angular distance in radians
            const angularDistance = radiusInKm / earthRadius;

            // Calculate the maximum latitude
            const maxLatitudeRad = baseLatitudeRad + angularDistance;

            // Calculate the maximum longitude
            const maxLongitudeRad = baseLongitudeRad + angularDistance / Math.cos(baseLatitudeRad);

            // Convert back from radians to degrees
            const maxLatitude = toDegrees(maxLatitudeRad);
            const maxLongitude = toDegrees(maxLongitudeRad);

            return { maxLatitude, maxLongitude };
        }

        // Helper function to convert degrees to radians
        function toRadians(degrees) {
            return degrees * (Math.PI / 180);
        }

        // Helper function to convert radians to degrees
        function toDegrees(radians) {
            return radians * (180 / Math.PI);
        }
    </script>
</body>

</html>